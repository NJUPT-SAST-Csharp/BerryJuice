@page "/Wallet"
@rendermode InteractiveServer

<h3>My Wallet</h3>

<div class="form-group">
    <label for="selectBank">Select Bank:</label>
    <select id="selectBank" @bind="selectedBank">
        <option value="">-- Select a Bank --</option>
        @foreach (var bank in banks)
        {
            <option value="@bank">@bank</option>
        }
    </select>
</div>

<div class="form-group">
    <label for="money">Money:</label>
    <InputText id="money" @bind-Value="moneyInput" />
</div>

<button class="btn" @onclick="AddAsset">Add</button>

<h4>Assets List</h4>
<ul class="asset-list">
    @foreach (var a in assets)
    {
        <li class="asset-item">
            <strong>Bank:</strong> @a.Bank, <strong>Money:</strong> @a.Money, <strong>Last Modified:</strong> @a.LastModified.ToString("yyyy-MM-dd HH:mm:ss")
        </li>
    }
</ul>

<h4>Total Money: @totalMoney</h4>

@code {
    private class Asset
    {
        public string? Bank { get; set; }
        public decimal Money { get; set; }
        public DateTime LastModified { get; set; }
    }

    private string? selectedBank;
    private string? moneyInput;
    private List<string> banks = new List<string>
    {
        "Bank A",
        "Bank B",
        "Bank C",
        "Bank D"
    };

    private List<Asset> assets = new List<Asset>();
    private decimal totalMoney = 0;

    private void AddAsset()
    {
        if (!string.IsNullOrEmpty(selectedBank) && decimal.TryParse(moneyInput, out decimal moneyValue))
        {
            var existingAsset = assets.FirstOrDefault(a => a.Bank == selectedBank);

            if (existingAsset != null)
            {
                existingAsset.Money += moneyValue;
                existingAsset.LastModified = DateTime.Now;
            }
            else
            {
                assets.Add(new Asset { Bank = selectedBank, Money = moneyValue, LastModified = DateTime.Now });
            }

            totalMoney += moneyValue;
            moneyInput = string.Empty;
            selectedBank = null;
        }
    }
}
